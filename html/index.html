<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168371102-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-168371102-1');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePage</title>
    <link rel="stylesheet" href="../CSS/base.css">
    <link rel="stylesheet" href="../CSS/flexbox.css">

</head>
<body>
<!-- Facebook Login -->
<script>
    function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
        console.log('statusChangeCallback');
        console.log(response);                   // The current login status of the person.
        console.log(response.authResponse.accessToken);  
        if (response.status === 'connected') {
            FB.api('/me',"GET",{ "fields": 'name,picture,id,email' },function(response) {
                // console.log(response);   
            });
            // Logged into your webpage and Facebook.
        } else {
            // The person is not logged into your webpage or we are unable to tell. 
        }
    }

    function checkLoginState() {               // Called when a person is finished with the Login Button.
        FB.getLoginStatus(function(response) {   // See the onlogin handler
        statusChangeCallback(response);
        });
    }

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '592261011699303',
        cookie     : true,
        xfbml      : true,
        version    : 'v7.0'
      });
        
      FB.getLoginStatus(function(response) {   // Called after the JS SDK has been initialized.
        statusChangeCallback(response);        // Returns the login status.
        });   
    };
  
    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    function login() {
        FB.login(function(response) {
            statusChangeCallback(response);
            window.location.href=`../html/profilePage.html`;
        }, {scope: 'public_profile,email'});
        //name,picture,id包含在public_profile裡面
        //scope要和FB.login放在一起，在登入時直接要求給予email權限
    }
    function logout() {
        FB.logout(function(response) {
        // Person is now logged out
            
        });
    }

    
</script>
<!-- Facebook Login Btn -->
    <header>
        <div class=".btn_logo01" onclick="sendAll()">
            <a href="./">
                <img src="../images/logo.png" class="btn_logo01">
            </a>
        </div>
        <nav class="webNav">
            <div class="item" onclick="sendAJAX('women')">
                <p>女裝</p>
            </div>
            <div class="item" onclick="sendAJAX('men')">
                <p>男裝</p>
            </div>
            <div class="item" onclick="sendAJAX('accessories')">
                <p>配件</p>
            </div>
        </nav>
        <!-- <a class="mobileSearch" href='./'><img src="../images/search.png"></a> -->
        <form class="mobileSearch" onsubmit="sendSearchResult();return false;">
            <input id="searchPt2" type="text" class="search"></input>
        </form>
        <div class="feature" onsubmit="sendSearchResult();return false;">
            <form class="item">
                <input id="searchPt" type="text" class="search"></input>
            </form>
            <a href="./cartPage.html" id="cartCount" class="item cart">0</a>
            <div class="item member" onclick="login()">
                <img src="../images/member.png" alt="">
            </div>
        </div>
    </header>
    <nav class="mobile">
        <div class="item" onclick="sendAJAX('women')">
            <p>女裝</p>
        </div>
        <div class="item" onclick="sendAJAX('men')">
            <p>男裝</p>
        </div>
        <div class="item" onclick="sendAJAX('accessories')">
            <p>配件</p>
        </div>
    </nav>
        <!-- <div class="keyvisual" style="background-image: url('https://api.appworks-school.tw/assets/keyvisuals/201807242228.jpg')">
            <img src="../images/201807242228.jpg" alt="">
            background-size:cover   background-position
            <div class="content">
                <p id="storyContent"></p>
            </div>

            <div class="step">
                <span class="circle"></span>
                <span class="circle"></span>
                <span class="circle"></span>
            </div>
        </div> -->
        <div class="banner">
            <div id="containerAJAX" class="slideshow-container">
                <!-- <div class="mySlides fade keyvisual" style="background-image: url('https://api.appworks-school.tw/assets/keyvisuals/201807242228.jpg')">
                    <div class="content">
                        <p id="storyContent">123</p>
                    </div>  
                </div>
                <div class="mySlides fade keyvisual" style="background-image: url('https://api.appworks-school.tw/assets/keyvisuals/201807242228.jpg')">
                    <div class="content">
                        <p id="storyContent">123</p>
                    </div>  
                </div> -->
                
            </div>
            <div id="stepCircle" class="step">
                <!-- <span class="circle dot" onclick="currentSlide(1)"></span>
                <span class="circle dot" onclick="currentSlide(2)"></span>
                <span class="circle dot" onclick="currentSlide(3)"></span> -->
            </div>
        </div>

    <main>
        <div class="view">
            <div class="products" id="products">
                <!-- <a class="product" href="">
                    <img src="../images/main.jpg" alt="">
                    <div class="colors">
                        <div class="color" style="background-color: rgb(141, 116, 70);"></div>
                        <div class="color" style="background-color: rgb(120, 142, 190);"></div>
                        <div class="color" style="background-color: rgb(1, 9, 10);"></div>
                    </div>
                    <div class="name"><a href="product.html?id=768768686">後鬆緊牛仔落地寬褲</a></div>
                    <div class="price">TWD.799</div>
                </a>-->
            </div>
        </div>
    </main>
    <footer>
        <div class="footerView">
            <div class="link">
                <div class="item">關於Stylish</div>
                <div class="item">服務條款</div>
                <div class="item">隱私政策</div>
                <div class="item">聯絡我們</div>
                <div class="item noborder">FAQ</div>
            </div>
            <div class="social">
                <img src="../images/line.png" alt="Line">
                <img src="../images/twitter.png" alt="twitter">
                <img src="../images/facebook.png" alt="Facebook">
            </div>
            <div class="copyright">© 2018. All rights reserved.</div>
        </div>
        <div class="mobileView">
            <div class="mobileViewUpper">
                <div class="link">
                    <div class="item">關於Stylish</div>
                    <div class="item">服務條款</div>
                    <div class="item">隱私政策</div>
                    <div class="item">聯絡我們</div>
                    <div class="item">FAQ</div>
                </div>
                <div class="social">
                    <img src="../images/line.png" alt="Line">
                    <img src="../images/twitter.png" alt="twitter">
                    <img src="../images/facebook.png" alt="Facebook">
                </div>
            </div>    
            <div class="copyright">© 2018. All rights r</div>
        </div>
    </footer>
    <div class="mobileFixed">
        <a class="item" href="./cartPage.html">
            <div id="mobileCartCount" class="fixedCart">0</div>購物車
        </a>
        <div class="item fixedMember" onclick="login()">
            <img src="../images/member-mobile.png">會員
        </div>
    </div>
    <script src="../JS/AJAX_layout.js"></script>
    <script src="../JS/productSearchAPI.js"></script>
    <script src="../JS/paging.js"></script>
    <script src="../JS/slideShow.js"></script>
</body>
</html>